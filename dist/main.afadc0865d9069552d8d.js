!function(){"use strict";function e(e,t,n){var r=document.createElement("".concat(e));return r.className="".concat(t),n===document.body?n.prepend(r):n.append(r),r}function t(e){for(var t=0;t<e.length;t++)e[t].innerText.length<2&&(e[t].innerText=e[t].innerText.toUpperCase())}function n(e){for(var t=0;t<e.length;t++)e[t].innerText.length<2&&(e[t].innerText=e[t].innerText.toLowerCase())}var r=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","del"],["CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],a=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","del","CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift","Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"],i=[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","del"],["CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],o=e("div","container",document.body),s=e("h1","title",o),c=e("input","color-input",o),l=e("textarea","textarea",o),u=e("div","container-keys",o),v=e("div","description",o);function d(t){for(var n=e("div","row",u),r=0;r<t.length;r++){var a=e("div","key",n);t[r].length>1&&a.classList.add("".concat(t[r])),0===t[r].length&&a.classList.add("space"),a.innerText="".concat(t[r])}}for(var p=0;p<r.length;p++)localStorage.lang&&localStorage.lang.includes("eng")?(d(i[p]),u.classList.add("eng")):(d(r[p]),u.classList.remove("eng"));var g=document.querySelectorAll(".key"),m=document.querySelector(".CapsLock"),L=document.querySelector(".Shift"),f=document.querySelectorAll(".Shift")[1],h=document.querySelector(".Ctrl"),A=document.querySelectorAll(".Ctrl")[1],C=document.querySelector(".Alt"),y=document.querySelectorAll(".Alt")[1],T=document.querySelector(".space"),k=document.querySelector("body"),S=[],x=["ControlLeft","AltLeft"];s.innerHTML="Virtual keyboard",v.innerText="Для переключения языка комбинация: левыe ctrl + alt",l.setAttribute("id","textarea"),l.setAttribute("rows","5"),l.setAttribute("cols","40"),c.setAttribute("type","color");for(var b=0;b<g.length;b++)g[b].setAttribute("keyname",g[b].innerText),g[b].setAttribute("upperCaseName",g[b].innerText.toUpperCase()),g[b].setAttribute("eng",a[b]),"del"===g[b].innerText&&(g[b].setAttribute("keyname","Delete"),g[b].setAttribute("upperCaseName","Delete".toUpperCase())),"Ctrl"===g[b].innerText&&(g[b].setAttribute("keyname","Control"),g[b].setAttribute("upperCaseName","Control".toUpperCase())),"Win"===g[b].innerText&&(g[b].setAttribute("keyname","Meta"),g[b].setAttribute("upperCaseName","Meta".toUpperCase())),"▲"===g[b].innerText&&(g[b].setAttribute("keyname","ArrowUp"),g[b].setAttribute("upperCaseName","ArrowUp".toUpperCase())),"▼"===g[b].innerText&&(g[b].setAttribute("keyname","ArrowDown"),g[b].setAttribute("upperCaseName","ArrowDown".toUpperCase())),"◄"===g[b].innerText&&(g[b].setAttribute("keyname","ArrowLeft"),g[b].setAttribute("upperCaseName","ArrowLeft".toUpperCase())),"►"===g[b].innerText&&(g[b].setAttribute("keyname","ArrowRight"),g[b].setAttribute("upperCaseName","ArrowRight".toUpperCase()));k.addEventListener("keydown",(function(e){"CapsLock"==e.code&&(m.classList.toggle("active"),m.classList.contains("active")?t(g):n(g))})),document.addEventListener("keydown",(function(e){for(var t=0;t<g.length;t++){if(e.key!=g[t].getAttribute("keyname")&&e.key!=g[t].getAttribute("upperCaseName")&&e.key!=g[t].getAttribute("eng")||"CapsLock"===e.code||(g[t].classList.add("active"),e.key.length<2&&(l.value+=g[t].innerText)),"Space"==e.code&&T.classList.add("active"),"ShiftLeft"==e.code){f.classList.remove("active");for(var n=0;n<g.length;n++)g[n].innerText.length<2&&(g[n].innerText=g[n].innerText.toUpperCase());m.classList.remove("active")}if("ShiftRight"==e.code){L.classList.remove("active");for(;0<g.length;t++)g[0].innerText.length<2&&(g[0].innerText=g[0].innerText.toUpperCase());m.classList.remove("active")}"ControlLeft"==e.code&&A.classList.remove("active"),"ControlRight"==e.code&&h.classList.remove("active"),"AltLeft"==e.code&&y.classList.remove("active"),"AltRight"==e.code&&C.classList.remove("active")}"Backspace"==e.code&&(l.selectionStart===l.value.length?l.value="".concat(l.value.split("").slice(0,l.value.length-1).join("")):l.value="".concat(l.value.split("").slice(0,l.selectionStart).join("")).concat(l.value.split("").slice(l.selectionStart,l.value.length).join("")))})),document.addEventListener("keyup",(function(e){for(var t=function(t){if(e.key!=g[t].getAttribute("keyname")&&e.key!=g[t].getAttribute("upperCaseName")&&e.key!=g[t].getAttribute("eng")||"CapsLock"===e.code||(g[t].classList.remove("active"),g[t].classList.add("remove")),"Space"==e.code&&(T.classList.remove("active"),T.classList.add("remove")),"ShiftLeft"==e.code){f.classList.remove("active"),f.classList.remove("remove");for(var n=0;n<g.length;n++)g[n].innerText.length<2&&(g[n].innerText=g[n].innerText.toLowerCase())}if("ShiftRight"==e.code){L.classList.remove("active"),L.classList.remove("remove");for(var r=0;r<g.length;r++)g[r].innerText.length<2&&(g[r].innerText=g[r].innerText.toLowerCase())}"ControlLeft"==e.code&&(A.classList.remove("active"),A.classList.remove("remove")),"ControlRight"==e.code&&(h.classList.remove("active"),h.classList.remove("remove")),"AltLeft"==e.code&&(y.classList.remove("active"),y.classList.remove("remove")),"AltRight"==e.code&&(C.classList.remove("active"),C.classList.remove("remove")),setTimeout((function(){g[t].classList.remove("remove")}),600)},n=0;n<g.length;n++)t(n)})),document.addEventListener("click",(function(e){if(e.target.innerText.length<2&&e.target!=c){var r=l.selectionStart;l.selectionEnd;l.value="".concat(l.value.split("").slice(0,l.selectionStart).join("")).concat(e.target.innerText).concat(l.value.split("").slice(l.selectionStart,l.value.length).join("")),l.focus(),l.selectionEnd=r+1}if("CapsLock"==e.target.innerText?(m.classList.toggle("active"),m.classList.contains("active")?t(g):n(g)):(e.target.classList.add("remove"),setTimeout((function(){e.target.classList.remove("remove")}),600)),"Backspace"===e.target.innerHTML){var a=l.selectionStart;l.selectionEnd;l.value="".concat(l.value.split("").slice(0,l.selectionStart-1).join("")).concat(l.value.split("").slice(l.selectionStart,l.value.length).join("")),l.focus(),l.selectionEnd=a-1}if("Enter"===e.target.innerHTML){var i=l.selectionStart;l.selectionEnd;l.value="".concat(l.value.split("").slice(0,l.selectionStart).join(""),"\r\n").concat(l.value.split("").slice(l.selectionStart,l.value.length).join("")),l.focus(),l.selectionEnd=i+1}if("del"===e.target.innerHTML){var o=l.selectionStart,s=l.selectionEnd;l.value="".concat(l.value.split("").slice(0,o).join("")).concat(l.value.split("").slice(o+1,l.value.length).join("")),l.focus(),l.selectionEnd=s}})),document.addEventListener("keydown",(function(e){e.repeat||S.push(e.code)})),document.addEventListener("keyup",(function(){for(var e=0;e<x.length;e++)if(x[e]!==S[e])return void(S.length=0);if(localStorage.lang.includes("eng"))for(var t=0;t<g.length;t++){var n,i=[];i=(n=i).concat.apply(n,r),g[t].innerText=i[t],u.classList.remove("eng")}if(!localStorage.lang.includes("eng"))for(var o=0;o<g.length;o++)u.classList.add("eng"),g[o].innerText=a[o];localStorage.setItem("lang",u.classList),m.classList.remove("active"),S.length=0})),localStorage.setItem("lang",u.classList),c.addEventListener("input",(function(){for(var e=0;e<g.length;e++)g[e].style.color=c.value;u.style.backgroundColor=c.value,l.style.borderColor=c.value}))}();