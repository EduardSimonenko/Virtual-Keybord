!function(){"use strict";function e(e,t,r){var n=document.createElement("".concat(e));return n.className="".concat(t),r===document.body?r.prepend(n):r.append(n),n}function t(e){for(var t=0;t<e.length;t++)e[t].innerText.length<2&&(e[t].innerText=e[t].innerText.toUpperCase())}function r(e){for(var t=0;t<e.length;t++)e[t].innerText.length<2&&(e[t].innerText=e[t].innerText.toLowerCase())}var n=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","del"],["CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],a=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","del","CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift","Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"],s=e("div","container",document.body),i=e("h1","title",s),o=e("textarea","textarea",s),c=e("div","container-keys",s),l=e("div","description",s);function v(t){for(var r=e("div","row",c),n=0;n<t.length;n++){var a=e("div","key",r);t[n].length>1&&a.classList.add("".concat(t[n])),0===t[n].length&&a.classList.add("space"),a.innerText="".concat(t[n])}}for(var u=0;u<n.length;u++)v(n[u]);var d=document.querySelectorAll(".key"),m=document.querySelector(".CapsLock"),p=document.querySelector(".Shift"),L=document.querySelectorAll(".Shift")[1],g=document.querySelector(".Ctrl"),f=document.querySelectorAll(".Ctrl")[1],h=document.querySelector(".Alt"),A=document.querySelectorAll(".Alt")[1],C=document.querySelector(".space"),y=document.querySelector("body"),T=[],k=["ControlLeft","AltLeft"];i.innerHTML="Virtual keyboard",l.innerText="Для переключения языка комбинация: левыe ctrl + alt",o.setAttribute("id","textarea"),o.setAttribute("rows","5"),o.setAttribute("cols","40");for(var x=0;x<d.length;x++)d[x].setAttribute("keyname",d[x].innerText),d[x].setAttribute("upperCaseName",d[x].innerText.toUpperCase()),d[x].setAttribute("eng",a[x]),"del"===d[x].innerText&&(d[x].setAttribute("keyname","Delete"),d[x].setAttribute("upperCaseName","Delete".toUpperCase())),"Ctrl"===d[x].innerText&&(d[x].setAttribute("keyname","Control"),d[x].setAttribute("upperCaseName","Control".toUpperCase())),"Win"===d[x].innerText&&(d[x].setAttribute("keyname","Meta"),d[x].setAttribute("upperCaseName","Meta".toUpperCase())),"▲"===d[x].innerText&&(d[x].setAttribute("keyname","ArrowUp"),d[x].setAttribute("upperCaseName","ArrowUp".toUpperCase())),"▼"===d[x].innerText&&(d[x].setAttribute("keyname","ArrowDown"),d[x].setAttribute("upperCaseName","ArrowDown".toUpperCase())),"◄"===d[x].innerText&&(d[x].setAttribute("keyname","ArrowLeft"),d[x].setAttribute("upperCaseName","ArrowLeft".toUpperCase())),"►"===d[x].innerText&&(d[x].setAttribute("keyname","ArrowRight"),d[x].setAttribute("upperCaseName","ArrowRight".toUpperCase()));y.addEventListener("keydown",(function(e){"CapsLock"==e.code&&(m.classList.toggle("active"),m.classList.contains("active")?t(d):r(d))})),document.addEventListener("keydown",(function(e){for(var t=0;t<d.length;t++){if(e.key!=d[t].getAttribute("keyname")&&e.key!=d[t].getAttribute("upperCaseName")&&e.key!=d[t].getAttribute("eng")||"CapsLock"===e.code||(d[t].classList.add("active"),e.key.length<2&&(o.value+=d[t].innerText)),"Space"==e.code&&C.classList.add("active"),"ShiftLeft"==e.code){L.classList.remove("active");for(var r=0;r<d.length;r++)d[r].innerText.length<2&&(d[r].innerText=d[r].innerText.toUpperCase());m.classList.remove("active")}if("ShiftRight"==e.code){p.classList.remove("active");for(;0<d.length;t++)d[0].innerText.length<2&&(d[0].innerText=d[0].innerText.toUpperCase());m.classList.remove("active")}"ControlLeft"==e.code&&f.classList.remove("active"),"ControlRight"==e.code&&g.classList.remove("active"),"AltLeft"==e.code&&A.classList.remove("active"),"AltRight"==e.code&&h.classList.remove("active")}"Backspace"==e.code&&(o.value=o.value.split("").slice(0,o.value.length-1).join(""))})),document.addEventListener("keyup",(function(e){for(var t=function(t){if(e.key!=d[t].getAttribute("keyname")&&e.key!=d[t].getAttribute("upperCaseName")&&e.key!=d[t].getAttribute("eng")||"CapsLock"===e.code||(d[t].classList.remove("active"),d[t].classList.add("remove")),"Space"==e.code&&(C.classList.remove("active"),C.classList.add("remove")),"ShiftLeft"==e.code){L.classList.remove("active"),L.classList.remove("remove");for(var r=0;r<d.length;r++)d[r].innerText.length<2&&(d[r].innerText=d[r].innerText.toLowerCase())}if("ShiftRight"==e.code){p.classList.remove("active"),p.classList.remove("remove");for(var n=0;n<d.length;n++)d[n].innerText.length<2&&(d[n].innerText=d[n].innerText.toLowerCase())}"ControlLeft"==e.code&&(f.classList.remove("active"),f.classList.remove("remove")),"ControlRight"==e.code&&(g.classList.remove("active"),g.classList.remove("remove")),"AltLeft"==e.code&&(A.classList.remove("active"),A.classList.remove("remove")),"AltRight"==e.code&&(h.classList.remove("active"),h.classList.remove("remove")),setTimeout((function(){d[t].classList.remove("remove")}),600)},r=0;r<d.length;r++)t(r)})),document.addEventListener("click",(function(e){var n;e.target.innerText.length<2&&(o.value+=e.target.innerText),"CapsLock"==e.target.innerText?(m.classList.toggle("active"),m.classList.contains("active")?t(d):r(d)):(e.target.classList.add("remove"),setTimeout((function(){e.target.classList.remove("remove")}),600)),"Backspace"===e.target.innerHTML&&(o.value=(n=o.value).split("").slice(0,n.length-1).join(""))})),document.addEventListener("keydown",(function(e){e.repeat||T.push(e.code)})),document.addEventListener("keyup",(function(){for(var e=0;e<k.length;e++)if(k[e]!==T[e])return void(T.length=0);if(c.classList.contains("eng"))for(var t=0;t<d.length;t++){var r,s=[];s=(r=s).concat.apply(r,n),d[t].innerText=s[t],c.classList.remove("eng")}else for(var i=0;i<d.length;i++)c.classList.add("eng"),d[i].innerText=a[i];m.classList.remove("active"),T.length=0}))}();