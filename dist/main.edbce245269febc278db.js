!function(){"use strict";function e(e,t,n){var a=document.createElement("".concat(e));return a.className="".concat(t),n===document.body?n.prepend(a):n.append(a),a}function t(e){for(var t=0;t<e.length;t++)e[t].innerText.length<2&&(e[t].innerText=e[t].innerText.toUpperCase())}function n(e){for(var t=0;t<e.length;t++)e[t].innerText.length<2&&(e[t].innerText=e[t].innerText.toLowerCase())}var a=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","del"],["CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],r=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","del","CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift","Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"],o=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","del","CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift","Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"],i=[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","del"],["CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],s=e("div","container",document.body),c=e("h1","title",s),l=e("input","color-input",s),u=e("textarea","textarea",s),v=e("div","container-keys",s),d=e("div","description",s);function p(t){for(var n=e("div","row",v),a=0;a<t.length;a++){var r=e("div","key",n);t[a].length>1&&r.classList.add("".concat(t[a])),0===t[a].length&&r.classList.add("space"),r.innerText="".concat(t[a])}}for(var g=0;g<a.length;g++)localStorage.lang&&localStorage.lang.includes("eng")?(p(i[g]),v.classList.add("eng")):(p(a[g]),v.classList.remove("eng"));var m=document.querySelectorAll(".key"),L=document.querySelector(".CapsLock"),f=document.querySelector(".Shift"),h=document.querySelectorAll(".Shift")[1],A=document.querySelector(".Ctrl"),C=document.querySelectorAll(".Ctrl")[1],y=document.querySelector(".Alt"),S=document.querySelectorAll(".Alt")[1],k=document.querySelector(".space"),T=document.querySelector("body"),b=document.querySelector(".Tab"),x=[],w=["ControlLeft","AltLeft"];c.innerHTML="Virtual keyboard",d.innerText="Для переключения языка комбинация: левыe ctrl + alt",u.setAttribute("id","textarea"),u.setAttribute("rows","5"),u.setAttribute("cols","40"),l.setAttribute("type","color");for(var E=0;E<m.length;E++)m[E].setAttribute("keyname",r[E]),m[E].setAttribute("upperCaseName",r[E]),m[E].setAttribute("eng",o[E]),"del"===m[E].innerText&&(m[E].setAttribute("keyname","Delete"),m[E].setAttribute("upperCaseName","Delete".toUpperCase())),"Ctrl"===m[E].innerText&&(m[E].setAttribute("keyname","Control"),m[E].setAttribute("upperCaseName","Control".toUpperCase())),"Win"===m[E].innerText&&(m[E].setAttribute("keyname","Meta"),m[E].setAttribute("upperCaseName","Meta".toUpperCase())),"▲"===m[E].innerText&&(m[E].setAttribute("keyname","ArrowUp"),m[E].setAttribute("upperCaseName","ArrowUp".toUpperCase())),"▼"===m[E].innerText&&(m[E].setAttribute("keyname","ArrowDown"),m[E].setAttribute("upperCaseName","ArrowDown".toUpperCase())),"◄"===m[E].innerText&&(m[E].setAttribute("keyname","ArrowLeft"),m[E].setAttribute("upperCaseName","ArrowLeft".toUpperCase())),"►"===m[E].innerText&&(m[E].setAttribute("keyname","ArrowRight"),m[E].setAttribute("upperCaseName","ArrowRight".toUpperCase()));T.addEventListener("keydown",(function(e){"CapsLock"==e.code&&(L.classList.toggle("active"),L.classList.contains("active")?t(m):n(m))})),document.addEventListener("keydown",(function(e){for(var t=0;t<m.length;t++){if(e.key!=m[t].getAttribute("keyname")&&e.key.toLowerCase()!=m[t].getAttribute("keyname")&&e.key!=m[t].getAttribute("upperCaseName")&&e.key!=m[t].getAttribute("eng")&&e.key!=m[t].getAttribute("eng").toUpperCase()||"CapsLock"===e.code||(m[t].classList.add("active"),e.key.length<2&&(u.value+=m[t].innerHTML)),"Space"==e.code&&k.classList.add("active"),"ShiftLeft"==e.code){h.classList.remove("active");for(var n=0;n<m.length;n++)m[n].innerText.length<2&&(m[n].innerText=m[n].innerText.toUpperCase());L.classList.remove("active")}if("ShiftRight"==e.code){f.classList.remove("active");for(;0<m.length;t++)m[0].innerText.length<2&&(m[0].innerText=m[0].innerText.toUpperCase());L.classList.remove("active")}"ControlLeft"==e.code&&C.classList.remove("active"),"ControlRight"==e.code&&A.classList.remove("active"),"AltLeft"==e.code&&S.classList.remove("active"),"AltRight"==e.code&&y.classList.remove("active")}if("Backspace"==e.code&&u.focus(),"Tab"==e.code){e.preventDefault(),b.classList.remove("active");var a=u.selectionStart;u.selectionEnd;u.selectionStart===u.value.length?u.value+="    ":u.value="".concat(u.value.split("").slice(0,u.selectionStart).join(""),"    ").concat(u.value.split("").slice(u.selectionStart,u.value.length).join("")),u.focus(),u.selectionEnd=a+4}"ArrowUp"!=e.code&&"ArrowDown"!=e.code&&"ArrowLeft"!=e.code&&"ArrowRight"!=e.code||u.focus()})),document.addEventListener("keyup",(function(e){for(var t=function(t){if(e.key!=m[t].getAttribute("keyname")&&e.key.toLowerCase()!=m[t].getAttribute("keyname")&&e.key!=m[t].getAttribute("upperCaseName")&&e.key!=m[t].getAttribute("eng")&&e.key!=m[t].getAttribute("eng").toUpperCase()||"CapsLock"===e.code||(m[t].classList.remove("active"),m[t].classList.add("remove")),"Space"==e.code&&(k.classList.remove("active"),k.classList.add("remove")),"ShiftLeft"==e.code){h.classList.remove("active"),h.classList.remove("remove");for(var n=0;n<m.length;n++)m[n].innerText.length<2&&(m[n].innerText=m[n].innerText.toLowerCase())}if("ShiftRight"==e.code){f.classList.remove("active"),f.classList.remove("remove");for(var a=0;a<m.length;a++)m[a].innerText.length<2&&(m[a].innerText=m[a].innerText.toLowerCase())}"ControlLeft"==e.code&&(C.classList.remove("active"),C.classList.remove("remove")),"ControlRight"==e.code&&(A.classList.remove("active"),A.classList.remove("remove")),"AltLeft"==e.code&&(S.classList.remove("active"),S.classList.remove("remove")),"AltRight"==e.code&&(y.classList.remove("active"),y.classList.remove("remove")),setTimeout((function(){m[t].classList.remove("remove")}),600)},n=0;n<m.length;n++)t(n)})),document.addEventListener("click",(function(e){if(e.target.innerText.length<2&&e.target!=l){var a=u.selectionStart;u.selectionEnd;u.value="".concat(u.value.split("").slice(0,u.selectionStart).join("")).concat(e.target.innerText).concat(u.value.split("").slice(u.selectionStart,u.value.length).join("")),u.selectionEnd=a+1}if("CapsLock"==e.target.innerText?(L.classList.toggle("active"),L.classList.contains("active")?t(m):n(m)):(e.target.classList.add("remove"),setTimeout((function(){e.target.classList.remove("remove")}),600)),"Backspace"===e.target.innerHTML){var r=u.selectionStart;u.selectionEnd;u.value="".concat(u.value.split("").slice(0,u.selectionStart-1).join("")).concat(u.value.split("").slice(u.selectionStart,u.value.length).join("")),u.focus(),u.selectionEnd=r-1}if("Enter"===e.target.innerHTML){var o=u.selectionStart;u.selectionEnd;u.value="".concat(u.value.split("").slice(0,u.selectionStart).join(""),"\r\n").concat(u.value.split("").slice(u.selectionStart,u.value.length).join("")),u.focus(),u.selectionEnd=o+1}if("del"===e.target.innerHTML){var i=u.selectionStart,s=u.selectionEnd;u.value="".concat(u.value.split("").slice(0,i).join("")).concat(u.value.split("").slice(i+1,u.value.length).join("")),u.focus(),u.selectionEnd=s}if("Tab"==e.target.innerHTML){var c=u.selectionStart;u.selectionEnd;u.selectionStart===u.value.length?u.value+="    ":u.value="".concat(u.value.split("").slice(0,u.selectionStart).join(""),"    ").concat(u.value.split("").slice(u.selectionStart,u.value.length).join("")),u.focus(),u.selectionEnd=c+4}if(e.target==k){var v=u.selectionStart,d=u.selectionEnd;u.value="".concat(u.value.split("").slice(0,v).join("")," ").concat(u.value.split("").slice(v,u.value.length).join("")),u.focus(),u.selectionEnd=d}})),document.addEventListener("keydown",(function(e){e.repeat||x.push(e.code)})),document.addEventListener("keyup",(function(){for(var e=0;e<w.length;e++)if(w[e]!==x[e])return void(x.length=0);if(localStorage.lang.includes("eng"))for(var t=0;t<m.length;t++){var n,r=[];r=(n=r).concat.apply(n,a),m[t].innerText=r[t],v.classList.remove("eng")}if(!localStorage.lang.includes("eng"))for(var i=0;i<m.length;i++)v.classList.add("eng"),m[i].innerText=o[i];localStorage.setItem("lang",v.classList),L.classList.remove("active"),x.length=0})),localStorage.setItem("lang",v.classList),l.addEventListener("input",(function(){for(var e=0;e<m.length;e++)m[e].style.color=l.value;v.style.backgroundColor=l.value,u.style.borderColor=l.value}))}();